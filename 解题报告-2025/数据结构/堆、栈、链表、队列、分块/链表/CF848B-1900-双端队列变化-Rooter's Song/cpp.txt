#include <bits/stdc++.h>
using namespace std;
using i64 = long long;
using f64 = long double;
using u64 = unsigned long long;
const f64 eps = 1e-12;
const i64 inf_i64 = 4e18;
const int inf_int = 1e9;
template <class T> void fmax(T &a, const T &b){
    if (b > a) a = b;
}
template <class T> void fmin(T &a, const T &b){
    if (b < a) a = b;
}
template <class T> void print(vector <T> &A, int d = 0){
    int n = A.size();
    for (int i = 0; i < n; ++ i){
        if (i) cout << " ";
        cout << A[i]+d;
    }
    cout << "\n";
}
int jgs(f64 x){
    return x < -eps ? -1 : x > eps;
}

void solve(){
    int n, w, h;
    cin >> n >> w >> h;
    vector <int> idx1, idx2;
    vector <array<int,3>> g(n);
    for (int i = 0; i < n; ++ i){
        cin >> g[i][0] >> g[i][1] >> g[i][2];
        if (g[i][0] == 1) idx1.push_back(i);
        else idx2.push_back(i);
    }
    vector<deque<int>> Qs;
    auto W = [&](int u)->int{
        return g[u][1] - g[u][2];
    };
    sort(idx2.begin(), idx2.end(), [&](auto &u, auto &v){
        return W(u) == W(v) ? g[u][1] < g[v][1] : W(u) < W(v);
    });
    sort(idx1.begin(), idx1.end(), [&](auto &u, auto &v){
        return W(u) == W(v) ? g[u][1] < g[v][1] : W(u) < W(v);
    });
    // print(idx2);
    vector<int> who(idx2.size(), -1), f(idx1.begin(), idx1.end());
    for (int i = 0; i < idx2.size(); ++ i){
        int j = i;
        deque <int> Q = {idx2[j]};
        while (j+1 < idx2.size() && (W(idx2[j]) == W(idx2[j+1]))){
            j += 1;
            Q.push_back(idx2[j]);
        }
        who[i] = Qs.size();
        Qs.push_back(Q);
        i = j;
    }

    if (idx2.size()){
        for (int i = 0, j = -1; i < idx1.size(); ++ i){
            while (j == -1 || j+1 < idx2.size() && W(idx1[i]) > W(idx2[j])){
                j += 1;
            }
            if (W(idx1[i]) == W(idx2[j])){
                assert(who[j] != -1);
                auto &Q = Qs[who[j]];
                int x = f[i];
                f[i] = Q.back();
                assert(W(x) == W(Q.back()));
                Q.pop_back();
                Q.push_front(x);
            }
        }
    }

    vector<array<int,2>> ans(n);
    auto H = [&](int i)->array<int,2>{
        return g[i][0] == 1 ? array<int,2>{g[i][1], h} : array<int,2>{w, g[i][1]};
    };
    for (int i = 0; i < idx2.size(); ++ i){
        int j = i-1;
        while (i > j || j+1 < idx2.size() && (W(idx2[j]) == W(idx2[j+1]))){
            j += 1;
            ans[Qs[who[i]][j-i]] = H(idx2[j]);
        }
        i = j;
    }
    for (int i = 0; i < idx1.size(); ++ i){
        ans[f[i]] = H(idx1[i]);
    }
    for (auto &it : ans){
        cout << it[0] << " " << it[1] << "\n";
    }
}

int main(){
#ifdef ONLINE_JUDGE
    ios::sync_with_stdio(false), cin.tie(nullptr), cout.tie(nullptr);
#else
    freopen("in.txt", "rt", stdin), freopen("out.txt", "wt", stdout);
#endif
    int _ = 1;
    while (_--){
        solve();
    }
    return 0;
}
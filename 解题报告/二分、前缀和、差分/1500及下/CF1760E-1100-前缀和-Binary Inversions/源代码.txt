#include  <bits/stdc++.h>
using namespace std;
using ll = long long;
const int INF = 1e18, mod = 998244353, N = 200060;
ll f[N][2];

void solve(){

    ll n, sum = 0;
    cin >> n;
    for (int i = 1; i <= n+1; ++ i) f[i][0] = f[i][1] = 0;
    vector <int> a(n+1);
    for (int i = 1; i <= n; ++ i) cin >> a[i];
    for (int i = 1, last = 0; i <= n; ++ i){
        if (a[i] == 0) sum += last;
        last += a[i];
        f[i][0] = f[i-1][0] + (a[i]==0);
        f[i][1] = f[i-1][1] + a[i];
    }
    ll res = sum;
    for (int i = 1; i <= n; ++ i){
        if (a[i] == 1) res = max(res, sum + f[i-1][1] - (f[n][0] - f[i][0]));
        else res = max(res, sum + (f[n][0] - f[i][0]) - f[i-1][1]);
    }
    cout << res << "\n";
}

int main(){
    ios::sync_with_stdio(0), cin.tie(0), cout.tie(0);
    int _ = 1;
    cin >> _;
    while (_--)
        solve();
    return 0;
}